name: üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é

on:
  schedule:
    - cron: '0 0 * * 0'  # –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 00:00 (–ø–æ–ª–Ω–æ—á—å)
  workflow_dispatch:
    inputs:
      theme:
        description: '–¢–µ–º–∞ –Ω–µ–¥–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)'
        required: false
        default: ''
        type: choice
        options:
          - –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
          - –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞
          - –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
          - data_science
          - —Å–ª—É—á–∞–π–Ω–∞—è

jobs:
  generate-schedule:
    runs-on: ubuntu-latest

    steps:
      - name: üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        uses: actions/checkout@v4

      - name: üé≤ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
        id: generate
        run: |
          echo "üéØ –ù–∞—á–∏–Ω–∞—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é..."
          
          # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–º—É –Ω–µ–¥–µ–ª–∏
          THEME="${{ github.event.inputs.theme }}"
          if [ -z "$THEME" ] || [ "$THEME" == "—Å–ª—É—á–∞–π–Ω–∞—è" ]; then
            THEMES=("–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ" "–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞" "–≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞" "data_science" "–º–æ–±–∏–ª—å–Ω–∞—è_—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞" "–∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å")
            THEME=${THEMES[$RANDOM % ${#THEMES[@]}]}
          fi
          
          echo "üé® –¢–µ–º–∞ –Ω–µ–¥–µ–ª–∏: $THEME"
          
          # –ü—Ä–µ–¥–º–µ—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º—ã
          case $THEME in
            "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ")
              SUBJECTS=(
                "Python: –û—Å–Ω–æ–≤—ã"
                "–ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö"
                "–û–û–ü –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
                "–†–∞–±–æ—Ç–∞ —Å Git –∏ GitHub"
                "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (pytest)"
                "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"
                "–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö"
                "REST API —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞"
              )
              ;;
            "–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞")
              SUBJECTS=(
                "–õ–∏–Ω–µ–π–Ω–∞—è –∞–ª–≥–µ–±—Ä–∞"
                "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑"
                "–î–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
                "–¢–µ–æ—Ä–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π"
                "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞"
                "–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
                "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è"
                "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
              )
              ;;
            "–≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞")
              SUBJECTS=(
                "HTML5 –∏ CSS3"
                "JavaScript ES6+"
                "React.js"
                "Node.js –∏ Express"
                "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–µ–±–∞"
                "–í–µ–±-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
                "Docker –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
                "Performance Optimization"
              )
              ;;
            "data_science")
              SUBJECTS=(
                "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å Pandas"
                "–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö"
                "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ"
                "–ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏"
                "–û–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞"
                "Big Data —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"
                "SQL –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏"
                "–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã"
              )
              ;;
            *)
              SUBJECTS=(
                "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Python"
                "Web-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞"
                "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
                "–ê–ª–≥–æ—Ä–∏—Ç–º—ã"
                "–°–µ—Ç–∏ –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏"
                "–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã"
                "–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
                "–ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
              )
              ;;
          esac
          
          # –ê—É–¥–∏—Ç–æ—Ä–∏–∏
          ROOMS=(
            "101" "102" "103" "104" "105"
            "201" "202" "203" "204" "205" 
            "301" "302" "303" "304" "305"
            "–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–π –∫–ª–∞—Å—Å 1"
            "–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–π –∫–ª–∞—Å—Å 2"
            "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è"
            "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è —Å–µ—Ç–µ–π"
            "–ú—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã–π –∫–ª–∞—Å—Å"
            "–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª"
            "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞"
          )
          
          # –í—Ä–µ–º—è –ø–∞—Ä (—Ä–∞–∑–Ω—ã–µ —Å–ª–æ—Ç—ã)
          TIME_SLOTS=(
            "8:30-10:00"
            "10:10-11:40" 
            "12:00-13:30"
            "13:40-15:10"
            "15:20-16:50"
            "17:00-18:30"
          )
          
          # –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ (6-–¥–Ω–µ–≤–Ω–∞—è —É—á–µ–±–Ω–∞—è –Ω–µ–¥–µ–ª—è)
          DAYS=("–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫" "–≤—Ç–æ—Ä–Ω–∏–∫" "—Å—Ä–µ–¥–∞" "—á–µ—Ç–≤–µ—Ä–≥" "–ø—è—Ç–Ω–∏—Ü–∞" "—Å—É–±–±–æ—Ç–∞")
          
          # –°–æ–∑–¥–∞–µ–º JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—É
          echo "{" > schedule.json
          echo "  \"_meta\": {" >> schedule.json
          echo "    \"generated_at\": \"$(date -Iseconds)\"," >> schedule.json
          echo "    \"week_number\": $(date +%U)," >> schedule.json
          echo "    \"theme\": \"$THEME\"," >> schedule.json
          echo "    \"academic_year\": \"2024-2025\"" >> schedule.json
          echo "  }," >> schedule.json
          
          # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è
          for day_index in "${!DAYS[@]}"; do
            DAY="${DAYS[$day_index]}"
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–Ω—è
            if [ "$DAY" == "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫" ]; then
              DAY_TYPE="–Ω–∞—á–∞–ª–æ_–Ω–µ–¥–µ–ª–∏"
              NUM_CLASSES=$((3 + RANDOM % 3))  # 3-5 –ø–∞—Ä
            elif [ "$DAY" == "—Å—É–±–±–æ—Ç–∞" ]; then
              DAY_TYPE="–∫–æ—Ä–æ—Ç–∫–∏–π_–¥–µ–Ω—å"
              NUM_CLASSES=$((1 + RANDOM % 3))  # 1-3 –ø–∞—Ä—ã
            else
              DAY_TYPE="—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π"
              NUM_CLASSES=$((2 + RANDOM % 4))  # 2-5 –ø–∞—Ä
            fi
            
            echo "  \"$DAY\": {" >> schedule.json
            echo "    \"type\": \"$DAY_TYPE\"," >> schedule.json
            echo "    \"classes\": [" >> schedule.json
            
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –¥–Ω—è
            USED_SLOTS=()
            
            # –°–æ–∑–¥–∞–µ–º –ø–∞—Ä—ã
            for ((i=0; i<NUM_CLASSES; i++)); do
              # –í—ã–±–∏—Ä–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç
              while true; do
                SLOT_INDEX=$((RANDOM % ${#TIME_SLOTS[@]}))
                TIME_SLOT="${TIME_SLOTS[$SLOT_INDEX]}"
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ª–∏ —É–∂–µ —ç—Ç–æ—Ç —Å–ª–æ—Ç
                if [[ ! " ${USED_SLOTS[@]} " =~ " ${TIME_SLOT} " ]]; then
                  USED_SLOTS+=("$TIME_SLOT")
                  break
                fi
              done
              
              # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
              SUBJECT_INDEX=$((RANDOM % ${#SUBJECTS[@]}))
              ROOM_INDEX=$((RANDOM % ${#ROOMS[@]}))
              
              SUBJECT="${SUBJECTS[$SUBJECT_INDEX]}"
              ROOM="${ROOMS[$ROOM_INDEX]}"
              
              # –†–∞–∑–¥–µ–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç
              START_TIME=$(echo $TIME_SLOT | cut -d'-' -f1)
              END_TIME=$(echo $TIME_SLOT | cut -d'-' -f2)
              
              # –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø –∑–∞–Ω—è—Ç–∏—è (–ª–µ–∫—Ü–∏—è/–ø—Ä–∞–∫—Ç–∏–∫–∞/–ª–∞–±–∞)
              CLASS_TYPES=("–ª–µ–∫—Ü–∏—è" "–ø—Ä–∞–∫—Ç–∏–∫–∞" "–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è")
              CLASS_TYPE=${CLASS_TYPES[$RANDOM % ${#CLASS_TYPES[@]}]}
              
              # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è (–¥–ª—è –¥–µ–º–æ)
              TEACHER_ID="T$((1000 + RANDOM % 9000))"
              
              # –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä—É
              echo "      {" >> schedule.json
              echo "        \"id\": \"C$(date +%Y%m%d)$((day_index+1))$((i+1))\"," >> schedule.json
              echo "        \"type\": \"$CLASS_TYPE\"," >> schedule.json
              echo "        \"subject\": \"$SUBJECT\"," >> schedule.json
              echo "        \"teacher_id\": \"$TEACHER_ID\"," >> schedule.json
              echo "        \"room\": \"$ROOM\"," >> schedule.json
              echo "        \"time\": {" >> schedule.json
              echo "          \"start\": \"$START_TIME\"," >> schedule.json
              echo "          \"end\": \"$END_TIME\"," >> schedule.json
              echo "          \"duration\": \"90 –º–∏–Ω\"" >> schedule.json
              echo "        }," >> schedule.json
              echo "        \"priority\": \"$([ $i -eq 0 ] && echo "–≤—ã—Å–æ–∫–∞—è" || echo "—Å—Ä–µ–¥–Ω—è—è")\"" >> schedule.json
              echo "      }" >> schedule.json
              
              # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø—è—Ç—É—é –µ—Å–ª–∏ –Ω–µ –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–∞—Ä–∞
              if [ $i -lt $((NUM_CLASSES - 1)) ]; then
                echo "      ," >> schedule.json
              fi
            done
            
            echo "    ]" >> schedule.json
            echo "  }" >> schedule.json
            
            # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø—è—Ç—É—é –µ—Å–ª–∏ –Ω–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å
            if [ $day_index -lt $(( ${#DAYS[@]} - 1 )) ]; then
              echo "  ," >> schedule.json
            fi
          done
          
          echo "}" >> schedule.json
          
          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
          TOTAL_CLASSES=$(jq '.[] | select(.classes) | .classes | length' schedule.json | awk '{sum+=$1} END{print sum}')
          echo "total_classes=$TOTAL_CLASSES" >> $GITHUB_OUTPUT
          echo "theme=$THEME" >> $GITHUB_OUTPUT
          echo "week_number=$(date +%U)" >> $GITHUB_OUTPUT
          
          echo "‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!"
          echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:"
          echo "   –¢–µ–º–∞: $THEME"
          echo "   –í—Å–µ–≥–æ –ø–∞—Ä: $TOTAL_CLASSES"

      - name: üìä –ê–Ω–∞–ª–∏–∑ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
        run: |
          echo "üìã –ê–ù–ê–õ–ò–ó –†–ê–°–ü–ò–°–ê–ù–ò–Ø –ù–ê –ù–ï–î–ï–õ–Æ:"
          echo "================================="
          
          # –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
          THEME=$(jq -r '._meta.theme' schedule.json)
          WEEK=$(jq -r '._meta.week_number' schedule.json)
          echo "üéØ –¢–µ–º–∞ –Ω–µ–¥–µ–ª–∏: $THEME"
          echo "üìÖ –ù–µ–¥–µ–ª—è ‚Ññ$WEEK"
          echo ""
          
          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º
          echo "üìä –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û –î–ù–Ø–ú:"
          echo "-------------------------"
          for day in –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤—Ç–æ—Ä–Ω–∏–∫ —Å—Ä–µ–¥–∞ —á–µ—Ç–≤–µ—Ä–≥ –ø—è—Ç–Ω–∏—Ü–∞ —Å—É–±–±–æ—Ç–∞; do
            if jq -e ".$day" schedule.json > /dev/null 2>&1; then
              COUNT=$(jq -r ".$day.classes | length" schedule.json)
              TYPE=$(jq -r ".$day.type" schedule.json)
              echo "  $day ($TYPE): $COUNT –ø–∞—Ä"
              
              # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –ø–∞—Ä—É –¥–Ω—è
              FIRST_CLASS=$(jq -r ".$day.classes[0] | \"    ‚Ä¢ \\(.time.start)-\\(.time.end) - \\(.subject) (\\(.type))\"" schedule.json)
              echo "  $FIRST_CLASS"
            fi
          done
          
          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –∑–∞–Ω—è—Ç–∏–π
          echo ""
          echo "üéì –¢–ò–ü–´ –ó–ê–ù–Ø–¢–ò–ô:"
          echo "---------------"
          LECTURES=$(jq -r '.[].classes[] | select(.type == "–ª–µ–∫—Ü–∏—è") | .subject' schedule.json | wc -l)
          PRACTICE=$(jq -r '.[].classes[] | select(.type == "–ø—Ä–∞–∫—Ç–∏–∫–∞") | .subject' schedule.json | wc -l)
          LABS=$(jq -r '.[].classes[] | select(.type == "–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è") | .subject' schedule.json | wc -l)
          echo "  –õ–µ–∫—Ü–∏–∏: $LECTURES"
          echo "  –ü—Ä–∞–∫—Ç–∏–∫–∏: $PRACTICE"
          echo "  –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ: $LABS"

      - name: üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        run: |
          git config --global user.email "github-actions@github.com"
          git config --global user.name "GitHub Actions"
          git add schedule.json
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
          if git diff --staged --quiet; then
            echo "‚ÑπÔ∏è –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏"
          else
            git commit -m "üîÑ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é ‚Ññ$(date +%U) [–¢–µ–º–∞: ${{ steps.generate.outputs.theme }}]"
            echo "‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"
          fi

      - name: üì® –£–≤–µ–¥–æ–º–∏—Ç—å –æ –Ω–æ–≤–æ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            üé≤ *–ù–û–í–û–ï –†–ê–°–ü–ò–°–ê–ù–ò–ï –°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–û!*
            
            üéØ –¢–µ–º–∞ –Ω–µ–¥–µ–ª–∏: ${{ steps.generate.outputs.theme }}
            üìÖ –ù–µ–¥–µ–ª—è ‚Ññ${{ steps.generate.outputs.week_number }}
            üìä –í—Å–µ–≥–æ –ø–∞—Ä: ${{ steps.generate.outputs.total_classes }}
            
            üìã *–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–Ω—è–º:*
            $(
              for day in –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤—Ç–æ—Ä–Ω–∏–∫ —Å—Ä–µ–¥–∞ —á–µ—Ç–≤–µ—Ä–≥ –ø—è—Ç–Ω–∏—Ü–∞ —Å—É–±–±–æ—Ç–∞; do
                if jq -e ".$day" schedule.json > /dev/null 2>&1; then
                  count=$(jq -r ".$day.classes | length" schedule.json)
                  type=$(jq -r ".$day.type" schedule.json)
                  first=$(jq -r ".$day.classes[0].subject" schedule.json | cut -c1-20)
                  echo "üìÖ $day ($type): $count –ø–∞—Ä"
                  echo "   üïê $(jq -r ".$day.classes[0].time.start" schedule.json) - $first..."
                fi
              done
            )
            
            üéì *–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:*
            ‚Ä¢ –õ–µ–∫—Ü–∏–∏: $(jq -r '.[].classes[] | select(.type == "–ª–µ–∫—Ü–∏—è") | .subject' schedule.json | wc -l)
            ‚Ä¢ –ü—Ä–∞–∫—Ç–∏–∫–∏: $(jq -r '.[].classes[] | select(.type == "–ø—Ä–∞–∫—Ç–∏–∫–∞") | .subject' schedule.json | wc -l) 
            ‚Ä¢ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ: $(jq -r '.[].classes[] | select(.type == "–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è") | .subject' schedule.json | wc -l)
            
            üìå *–ë–ª–∏–∂–∞–π—à–∞—è –ø–∞—Ä–∞ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫):*
            $(jq -r '.–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫.classes[0] | "üïê \(.time.start)-\(.time.end)\nüìö \(.subject)\nüö™ \(.room) (\(.type))"' schedule.json)
            
            ---
            ü§ñ *–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ –ø–æ–ª–Ω–æ—á—å!*
            
            üéØ *–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:*
            /today - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
            /week - –í—Å—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
            /next - –°–ª–µ–¥—É—é—â–∞—è –ø–∞—Ä–∞
          parse_mode: markdown